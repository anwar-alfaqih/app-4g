<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YEMEN 4G - Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø±ØµÙŠØ¯ Ø¨Ø§Ù‚Ø§Øª</title>
    <meta name="author" content="Anwar-Alfaqih">
    <meta name="designer" content="Anwar-Alfaqih">
    <meta name="owner" content="Anwar-Alfaqih">
    <meta name="title" content="YEMEN 4G - Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø±ØµÙŠØ¯ Ø¨Ø§Ù‚Ø§Øª">
    <meta name="description" content="Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø±Ø¹ Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø±ØµÙŠØ¯ Ø¨Ø§Ù‚Ø§Øª ÙŠÙ…Ù† ÙÙˆØ± Ø¬ÙŠ Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚ÙŠØ©.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://anwar-alfaqih.github.io/app-4g"> 
    <meta property="og:title" content="YEMEN 4G - Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø±ØµÙŠØ¯ Ø¨Ø§Ù‚Ø§Øª">
    <meta property="og:description" content="Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø±ØµÙŠØ¯ ÙŠÙ…Ù† 4GØŒ Ø¨ÙˆØ§Ø¨ØªÙƒ Ø§Ù„Ø³Ù‡Ù„Ø© Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø±ØµÙŠØ¯ ÙˆØ§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.">
    <meta property="og:image" content="https://raw.githubusercontent.com/anwar-alfaqih/app-4g/refs/heads/main/icon-512.png"> 
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://anwar-alfaqih.github.io/app-4g">
    <meta property="twitter:title" content="YEMEN 4G - Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø±ØµÙŠØ¯ Ø¨Ø§Ù‚Ø§Øª">
    <meta property="twitter:description" content="Ø§Ø³ØªØ¹Ù„Ù… Ø¹Ù† Ø±ØµÙŠØ¯ Ø¨Ø§Ù‚Ø§Øª ÙŠÙ…Ù† ÙÙˆØ± Ø¬ÙŠ Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø© Ø¹Ø¨Ø± ØªØ·Ø¨ÙŠÙ‚Ù†Ø§ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ.">
    <meta property="twitter:image" content="https://raw.githubusercontent.com/anwar-alfaqih/app-4g/refs/heads/main/icon-512.png">
    <link rel="icon" type="image/png" href="icon-512.png">
    <link rel="shortcut icon" href="icon-512.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="icon-512.png">
    <meta name="msapplication-TileImage" content="icon-512.png">
    <meta name="msapplication-TileColor" content="#004aad">    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#004aad">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #004aad; --main-gradient: linear-gradient(135deg, #004aad 0%, #001e46 100%);
            --bg: #ffffff; --text-color: #002d6a; --card-bg: #f8f9fa;
        }
        [data-theme="dark"] {
            --primary: #3d94ff; --main-gradient: linear-gradient(135deg, #1e1e1e 0%, #000000 100%);
            --bg: #121212; --text-color: #e1e1e1; --card-bg: #1e1e1e;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text-color); height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; transition: 0.3s; -webkit-user-select: none; -ms-user-select: none;user-select: none; }
        input, textarea { -webkit-user-select: text; -ms-user-select: text; user-select: text; }
       
        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
        .top-btn { position: fixed; top: 20px; background: rgba(0, 74, 173, 0.1); border: none; width: 45px; height: 45px; border-radius: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-color); z-index: 1000; transition: 0.3s; }
        #theme-btn { left: 20px; } #info-btn { right: 20px; }

        #app-ui { width: 90%; max-width: 400px; text-align: center; opacity: 0; transform: translateY(20px); transition: 0.8s; }
        #app-ui.visible { opacity: 1; transform: translateY(0); }

        .logo-box { width: 100px; height: 100px; margin: 0 auto 20px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); background: url('icon-512.png') center/cover #eee; }
        .btn-start { background: var(--main-gradient); color: white; border: none; padding: 18px; width: 100%; border-radius: 20px; font-weight: 700; font-size: 1.1rem; box-shadow: 0 10px 25px rgba(0,74,173,0.3); cursor: pointer; transition: 0.3s; }
        .btn-start:active { transform: scale(0.95); }

        .expiry-box { margin-top: 25px; padding: 15px; background: var(--card-bg); border-radius: 20px; border: 1px solid rgba(0,74,173,0.1); }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-container { width: 100%; height: 8px; background: rgba(0, 74, 173, 0.1); border-radius: 10px; margin: 15px 0; overflow: hidden; display: none; }
        #progress-bar { height: 100%; width: 0%; background: var(--main-gradient); transition: width 0.5s ease; border-radius: 10px; }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 10001; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .modal-content { background: var(--bg); width: 85%; max-width: 320px; padding: 25px; border-radius: 25px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        
        .social-container { display: flex; justify-content: center; gap: 20px; margin: 20px 0; }
        .social-link { width: 50px; height: 50px; border-radius: 15px; display: flex; align-items: center; justify-content: center; transition: 0.3s; color: white; text-decoration: none; }
        .facebook { background: #1877F2; }
        .telegram { background: #0088cc; }

        #error-overlay { position: fixed; inset: 0; background: var(--bg); z-index: 9000; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; }
        .hidden { display: none !important; }
    </style>
</head>
<body oncontextmenu="return false;">

    <button id="theme-btn" class="top-btn" onclick="toggleTheme()">
        <svg id="theme-svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg>
    </button>
    <button id="info-btn" class="top-btn" onclick="toggleInfo()">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
    </button>

    <audio id="click-sound" preload="auto">
        <source src="y4g.mp3" type="audio/mpeg">
    </audio>

    <main id="app-ui">
        <div class="logo-box"></div>
        <h1 style="font-weight: 900;">Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø±ØµÙŠØ¯ ÙŠÙ…Ù† 4G</h1>
        <p style="font-size: 0.85rem; opacity: 0.7; margin-bottom: 25px;">Ø¨ÙˆØ§Ø¨ØªÙƒ Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø±ØµÙŠØ¯ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ÙˆØ§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚ÙŠØ©.</p>
        
        <button class="btn-start" id="main-btn" onclick="handleRedirection()">Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</button>

        <div class="expiry-box">
            <h4 style="font-size: 0.8rem; margin-bottom: 10px;">â³ Ù…ÙˆØ¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø©</h4>
            <div id="setup-expiry">
                <input type="date" id="expiry-date" style="padding: 10px; border-radius: 10px; border: 1px solid #ddd; background: var(--bg); color: var(--text-color); width: 100%; margin-bottom: 10px; outline: none;">
                <button onclick="setExpiryDate()" style="background: var(--primary); color: white; border: none; padding: 10px; border-radius: 10px; width: 100%; cursor: pointer; font-weight: bold;">Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ¹Ø¯</button>
            </div>
            
            <div id="countdown-display" class="hidden">
                <div id="timer" style="font-size: 1.2rem; font-weight: 900;">--</div>
                
                <div class="progress-container" id="p-container" style="display: block;">
                    <div id="progress-bar"></div>
                </div>
                
                <button onclick="resetExpiry()" style="font-size: 0.7rem; background: none; border: none; color: var(--primary); text-decoration: underline; cursor: pointer; margin-top: 5px;">ØªØºÙŠÙŠØ± Ø§Ù„ØªØ§Ø±ÙŠØ®</button>
            </div>
        </div>
    </main>

    <div id="info-modal" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 5px;">Ø§Ù„Ù…Ø·ÙˆØ±</h3>
            <p style="font-weight: bold; color: var(--primary); font-size: 1.1rem;">Anwar Alfaqih</p>
            <div class="social-container">
                <a href="fb://facewebmodal/f?href=https://www.facebook.com/share/1C3eEtftYM/" class="social-link facebook" onclick="triggerFeedback()">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/></svg>
                </a>
                <a href="tg://resolve?domain=apps_alfaqih" class="social-link telegram" onclick="triggerFeedback()">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.14-.357.223-.548.223l.188-2.85 5.18-4.68c.225-.198-.049-.307-.346-.11l-6.4 4.03-2.768-.868c-.604-.19-.612-.604.124-.896l10.81-4.17c.5-.185.938.114.73.91z"/></svg>
                </a>
            </div>
            <button onclick="toggleInfo()" style="background: var(--primary); color: white; border: none; padding: 10px 40px; border-radius: 12px; cursor: pointer; font-weight: bold;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <div id="error-overlay">
        <div style="font-size: 50px; margin-bottom: 15px;">ğŸ“¡</div>
        <h3>Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</h3>
        <p style="font-size: 0.85rem; opacity: 0.7; margin-bottom: 25px;">ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†ØªØŒ Ø£Ùˆ Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ø®Ø¯Ù…Ø© ØªØ­Øª Ø§Ù„ØµÙŠØ§Ù†Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ØŒ Ø§Ùˆ Ø§Ù†Ùƒ ØªØ­Ø§ÙˆÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠÙ‡ Ø§Ù„ÙŠÙ…Ù†ÙŠÙ‡.</p>
        <button class="btn-start" style="width: 200px; margin-top: 20px;" onclick="handleRedirection()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
        <p onclick="backToHome()" style="margin-top: 20px; text-decoration: underline; cursor: pointer;">Ø±Ø¬ÙˆØ¹</p>
    </div>

    <script>
        let countdownInterval;

        function triggerFeedback() {
            const sound = document.getElementById('click-sound');
            sound.currentTime = 0; sound.play().catch(()=>{});
            if ("vibrate" in navigator) navigator.vibrate(40);
        }

        const moonPath = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
        const sunPath = '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>';

        function toggleInfo() { triggerFeedback(); const m = document.getElementById('info-modal'); m.style.display = (m.style.display === 'flex') ? 'none' : 'flex'; }
        
        function toggleTheme() {
            triggerFeedback();
            const curr = document.documentElement.getAttribute('data-theme');
            const next = curr === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            updateThemeIcon(next);
        }

        function updateThemeIcon(theme) {
            document.getElementById('theme-svg').innerHTML = (theme === 'dark') ? sunPath : moonPath;
        }

        function startCountdown(date) {
            document.getElementById('setup-expiry').classList.add('hidden');
            document.getElementById('countdown-display').classList.remove('hidden');
            const timer = document.getElementById('timer');
            const progressBar = document.getElementById('progress-bar');
            
            const update = () => {
                const now = new Date().getTime();
                const expiry = new Date(date).getTime();
                const diff = expiry - now;

                if (diff <= 0) { 
                    timer.innerText = "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¨Ø§Ù‚Ø©!"; 
                    timer.style.color = "#ff4d4d";
                    progressBar.style.width = "0%";
                    clearInterval(countdownInterval);
                    return; 
                }

                const d = Math.floor(diff / 86400000);
                const h = Math.floor((diff % 86400000) / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                
                timer.innerText = `${d}ÙŠ : ${h}Ø³ : ${m}Ø¯ : ${s}Ø«`;

                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© (Ø¹Ù„Ù‰ Ø£Ø³Ø§Ø³ Ø´Ù‡Ø± 30 ÙŠÙˆÙ…)
                const totalDuration = 30 * 24 * 60 * 60 * 1000;
                let percentage = (diff / totalDuration) * 100;
                if (percentage > 100) percentage = 100;
                progressBar.style.width = percentage + "%";
            };
            
            update();
            if (countdownInterval) clearInterval(countdownInterval);
            countdownInterval = setInterval(update, 1000);
        }

        function setExpiryDate() {
            triggerFeedback();
            const val = document.getElementById('expiry-date').value;
            if (val) { localStorage.setItem('yemen4g_expiry', val); startCountdown(val); }
        }

        function resetExpiry() {
            triggerFeedback();
            localStorage.removeItem('yemen4g_expiry');
            clearInterval(countdownInterval);
            document.getElementById('setup-expiry').classList.remove('hidden');
            document.getElementById('countdown-display').classList.add('hidden');
        }

        async function handleRedirection() {
            triggerFeedback();
            const btn = document.getElementById('main-btn');
            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...";
            try {
                const controller = new AbortController();
                setTimeout(() => controller.abort(), 5000);
                await fetch("https://ptc.gov.ye/?page_id=9017", { mode: 'no-cors', signal: controller.signal });
                window.location.href = "https://ptc.gov.ye/?page_id=9017";
            } catch {
                document.getElementById('app-ui').style.display = 'none';
                document.getElementById('error-overlay').style.display = 'flex';
            } finally { btn.innerText = "Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…"; }
        }

        function backToHome() { triggerFeedback(); document.getElementById('error-overlay').style.display = 'none'; document.getElementById('app-ui').style.display = 'block'; }

        window.onload = () => {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            updateThemeIcon(theme);
            document.getElementById('app-ui').classList.add('visible');
            const exp = localStorage.getItem('yemen4g_expiry');
            if (exp) startCountdown(exp);
        };

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù€ Service Worker
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
            .then(reg => console.log('PWA Ready!'))
            .catch(err => console.log('PWA Failed', err));
    });
}
        document.addEventListener('contextmenu', event => event.preventDefault());

document.onkeydown = function(e) {

    if(e.keyCode == 123) return false;
    
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) return false;
    
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) return false;
    
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) return false;
    
    if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;
    
    if(e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) return false;

    if(e.ctrlKey && e.keyCode == 'C'.charCodeAt(0)) return false;
};
    </script>
</body>
</html>
